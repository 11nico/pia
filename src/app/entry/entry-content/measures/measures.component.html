<!--
    TODO : remove the 'approved' class by default (it's just to show here)
    and add it only when evaluation is done
-->
<div class="pia-measureBlock approved" [attr.data-id]="measure.id">
  <form [formGroup]="measureForm">
    <div class="pia-measureBlock-title">
      <button type="button" (click)="displayMeasure()" class="btn" title="Afficher / masquer"><span class="pia-icons pia-icon-accordeon-up"></span></button>
      <input [attr.data-id]="measure.id" id="pia-measure-title-{{measure.id}}" formControlName="measureTitle"
             (focusout)="measureTitleFocusOut($event)" type="text" placeholder="Titre de la mesure">
    </div>
    <div class="pia-measureBlock-displayer fadeIn">
      <button type="button" class="btn pia-measureBlock-delete" *ngIf="displayEditButton && !this._evaluationService.showValidationButton" (click)="removeMeasure(measure.id)" title="Supprimer"><i class="fa fa-trash-o" aria-hidden="true"></i></button>
      <button type="button" class="btn pia-measureBlock-edit" *ngIf="displayDeleteButton && !this._evaluationService.showValidationButton" (click)="activateMeasureEdition()" title="Ã‰diter"><i class="fa fa-pencil" aria-hidden="true"></i></button>
      <div class="pia-measureBlock-content">
        <textarea [attr.data-id]="measure.id" id="pia-measure-content-{{measure.id}}" formControlName="measureContent"
                  (focusout)="measureContentFocusOut($event)" rows="8" cols="50"
                  placeholder="{{measure.placeholder}}"></textarea>
      </div>
    </div>
  </form>
  <app-comments [pia]="pia" [measure]="measure"></app-comments>
  <!-- TODO : To show only on evaluation mode -->
  <!-- Todo : voir pour caler un mesureId pour app evaluation -->
  <app-evaluations *ngIf="item.evaluation_mode == 'question' && _evaluationService.showValidationButton" [pia]="pia" [section]="section" [item]="item" [measureId]="measure.id"></app-evaluations>
</div>
