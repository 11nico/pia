<div class="pia-validation-PlanAction">
  <div class="pia-entryContentBlock-content">
    <!-- Action plan graph -->
    <div class="pia-entryContentBlock-content pia-actionPlanGraphBlock">
      <h2>Vue d'ensemble</h2>
      <div class="row">
        <div class="medium-6 columns pia-actionPlanGraphBlock-left">
          <h3>Principes Fondamentaux</h3>
          <div class="pia-actionPlanGraphBlock-item">
            <span class="pia-list">Finalité</span>
            <span class="pia-box" [ngClass]="{'pia-blue': results['2.1.211'] === 2, 'pia-red': results['2.1.211'] === 1}"></span>
            <span class="pia-box" [ngClass]="{'pia-green': results['2.1.211'] === 3, 'pia-red': results['2.1.211'] === 1}"></span>
          </div>
          <div class="pia-actionPlanGraphBlock-item">
            <span class="pia-list">Fondement</span>
            <span class="pia-box" [ngClass]="{'pia-blue': results['2.1.212'] === 2, 'pia-red': results['2.1.212'] === 1}"></span>
            <span class="pia-box" [ngClass]="{'pia-green': results['2.1.212'] === 3, 'pia-red': results['2.1.212'] === 1}"></span>
          </div>
          <div class="pia-actionPlanGraphBlock-item">
            <span class="pia-list">Données adéquates</span>
            <span class="pia-box" [ngClass]="{'pia-blue': results['2.1.213'] === 2, 'pia-red': results['2.1.213'] === 1}"></span>
            <span class="pia-box" [ngClass]="{'pia-green': results['2.1.213'] === 3, 'pia-red': results['2.1.213'] === 1}"></span>
          </div>
          <div class="pia-actionPlanGraphBlock-item">
            <span class="pia-list">Données exactes</span>
            <span class="pia-box" [ngClass]="{'pia-blue': results['2.1.214'] === 2, 'pia-red': results['2.1.214'] === 1}"></span>
            <span class="pia-box" [ngClass]="{'pia-green': results['2.1.214'] === 3, 'pia-red': results['2.1.214'] === 1}"></span>
          </div>
          <div class="pia-actionPlanGraphBlock-item">
            <span class="pia-list">Durée de conservation</span>
            <span class="pia-box" [ngClass]="{'pia-blue': results['2.1.215'] === 2, 'pia-red': results['2.1.215'] === 1}"></span>
            <span class="pia-box" [ngClass]="{'pia-green': results['2.1.215'] === 3, 'pia-red': results['2.1.215'] === 1}"></span>
          </div>
          <div class="pia-actionPlanGraphBlock-item">
            <span class="pia-list">Information des personnes</span>
            <span class="pia-box" [ngClass]="{'pia-blue': results['2.2.221'] === 2, 'pia-red': results['2.2.221'] === 1}"></span>
            <span class="pia-box" [ngClass]="{'pia-green': results['2.2.221'] === 3, 'pia-red': results['2.2.221'] === 1}"></span>
          </div>
          <div class="pia-actionPlanGraphBlock-item">
            <span class="pia-list">Recueil du consentement</span>
            <span class="pia-box" [ngClass]="{'pia-blue': results['2.2.222'] === 2, 'pia-red': results['2.2.222'] === 1}"></span>
            <span class="pia-box" [ngClass]="{'pia-green': results['2.2.222'] === 3, 'pia-red': results['2.2.222'] === 1}"></span>
          </div>
          <div class="pia-actionPlanGraphBlock-item">
            <span class="pia-list">Droit d’accès et à la portabilité</span>
            <span class="pia-box" [ngClass]="{'pia-blue': results['2.2.223'] === 2, 'pia-red': results['2.2.223'] === 1}"></span>
            <span class="pia-box" [ngClass]="{'pia-green': results['2.2.223'] === 3, 'pia-red': results['2.2.223'] === 1}"></span>
          </div>
          <div class="pia-actionPlanGraphBlock-item">
            <span class="pia-list">Droit de rectification et d’effacement</span>
            <span class="pia-box" [ngClass]="{'pia-blue': results['2.2.224'] === 2, 'pia-red': results['2.2.224'] === 1}"></span>
            <span class="pia-box" [ngClass]="{'pia-green': results['2.2.224'] === 3, 'pia-red': results['2.2.224'] === 1}"></span>
          </div>
          <div class="pia-actionPlanGraphBlock-item">
            <span class="pia-list">Droit de limitationet d’opposition</span>
            <span class="pia-box" [ngClass]="{'pia-blue': results['2.2.225'] === 2, 'pia-red': results['2.2.225'] === 1}"></span>
            <span class="pia-box" [ngClass]="{'pia-green': results['2.2.225'] === 3, 'pia-red': results['2.2.225'] === 1}"></span>
          </div>
          <div class="pia-actionPlanGraphBlock-item">
            <span class="pia-list">Sous-traitance</span>
            <span class="pia-box" [ngClass]="{'pia-blue': results['2.2.226'] === 2, 'pia-red': results['2.2.226'] === 1}"></span>
            <span class="pia-box" [ngClass]="{'pia-green': results['2.2.226'] === 3, 'pia-red': results['2.2.226'] === 1}"></span>
          </div>
          <div class="pia-actionPlanGraphBlock-item">
            <span class="pia-list">Transferts</span>
            <span class="pia-box" [ngClass]="{'pia-blue': results['2.2.227'] === 2, 'pia-red': results['2.2.227'] === 1}"></span>
            <span class="pia-box" [ngClass]="{'pia-green': results['2.2.227'] === 3, 'pia-red': results['2.2.227'] === 1}"></span>
          </div>
          <!-- <div class="pia-actionPlanGraphBlock-item">
            <span class="pia-list">Formalités</span>
            <span class="pia-box" [ngClass]="{'pia-blue': results['2.2.221'] === 2, 'pia-red': results['2.2.221'] === 1}"></span>
            <span class="pia-box" [ngClass]="{'pia-green': results['2.2.221'] === 3, 'pia-red': results['2.2.221'] === 1}"></span>
          </div> -->
        </div>
        <div class="medium-6 columns pia-actionPlanGraphBlock-right">
          <h3>Mesures</h3>
          <div class="pia-actionPlanGraphBlock-right-measures">
            <div class="pia-actionPlanGraphBlock-right-measures-scroll" *ngIf="measures">
              <div *ngFor="let measure of measures" class="pia-actionPlanGraphBlock-item">
                <span class="pia-box" [ngClass]="{'pia-blue': measure.status === 2, 'pia-red': measure.status === 1}"></span>
                <span class="pia-box" [ngClass]="{'pia-green': measure.status === 3, 'pia-red': measure.status === 1}"></span>
                <span class="pia-list">{{measure.name}}</span>
              </div>
            </div>
          </div>
          <h3>Risques</h3>
          <div class="pia-actionPlanGraphBlock-item" *ngIf="risks && risks['3.2']">
            <span class="pia-box" [ngClass]="{'pia-blue': risks['3.2']['status'] === 2, 'pia-red': risks['3.2']['status'] === 1}"></span>
            <span class="pia-box" [ngClass]="{'pia-green': risks['3.2']['status'] === 3, 'pia-red': risks['3.2']['status'] === 1}"></span>
            <span class="pia-list">Accès illégitime aux données</span>
          </div>
          <div class="pia-actionPlanGraphBlock-item" *ngIf="risks && risks['3.3']">
            <span class="pia-box" [ngClass]="{'pia-blue': risks['3.3']['status'] === 2, 'pia-red': risks['3.3']['status'] === 1}"></span>
            <span class="pia-box" [ngClass]="{'pia-green': risks['3.3']['status'] === 3, 'pia-red': risks['3.3']['status'] === 1}"></span>
            <span class="pia-list">Modifications de données</span>
          </div>
          <div class="pia-actionPlanGraphBlock-item" *ngIf="risks && risks['3.4']">
            <span class="pia-box" [ngClass]="{'pia-blue': risks['3.4']['status'] === 2, 'pia-red': risks['3.4']['status'] === 1}"></span>
            <span class="pia-box" [ngClass]="{'pia-green': risks['3.4']['status'] === 3, 'pia-red': risks['3.4']['status'] === 1}"></span>
            <span class="pia-list">Disparition de données</span>
          </div>
        </div>
        <div class="pia-legend">
          <p>Mesures Améliorables</p>
          <p>Mesures acceptables</p>
        </div>
      </div>
    </div>

    <!-- Principles action plans -->
    <div class="pia-entryContentBlock-content-fundamental">
      <h2>Principes fondamentaux</h2>
      <div class="pia-entryContentBlock-content-details-blocks">
        <div class="pia-details-blocks-content">
          <div class="pia-details-blocks-content-title">
            <h3>Finalités</h3>
            <button type="button" id="piaActionPlanPencil" class="btn hide" (click)="activateActionPlanEdition()" title="Éditer"><i class="fa fa-pencil" aria-hidden="true"></i></button>
          </div>
          <p>
            Afin d’éviter un usage incompatible ou un détournement de finalité, il
            conviendrait d’expliciter les autres finalités dans les documents portés à
            la connaissance des clients et de réitérer le PIA pour ces traitements.
            L’enjeu pour la vie privée des personnes difféère en fonction des finalités.
          </p>
          <form [formGroup]="actionPlanForm">
            <input type="date" id="pia-action-plan-date" (focusout)="actionPlanDateFocusOut()" formControlName="actionPlanDate">
            <input type="text" id="pia-action-plan-executive" (focusout)="actionPlanExecutiveFocusOut()" formControlName="actionPlanExecutive" placeholder="Responsable de la mise en oeuvre">
          </form>
        </div>
      </div>
    </div>
    <!-- Measures action plans -->
    <div class="pia-entryContentBlock-content-measures">
      <h2>Mesures existantes ou prévues</h2>
      <div class="pia-entryContentBlock-content-details-blocks">
        <div class="pia-details-blocks-content">
          <div *ngIf="noMeasuresActionPlan; else listMeasuresActionPlanComment">
            Aucun plan d'action enregistré.
          </div>
          <ng-template #listMeasuresActionPlanComment>
            <div *ngFor="let m of measures">
              {{m.action_plan_comment}}
            </div>
          </ng-template>
        </div>
      </div>
    </div>
    <!-- Risks action plans -->
    <div class="pia-entryContentBlock-content-risks">
      <h2>Risques</h2>
      <div class="pia-entryContentBlock-content-details-blocks">
        <div class="pia-details-blocks-content">
          <div *ngIf="noRisksActionPlan; else listRisksActionPlanComment">
            Aucun plan d'action enregistré.
          </div>
          <ng-template #listRisksActionPlanComment>
            <div *ngIf="risks['3.2']">
              {{risks['3.2'].action_plan_comment}}
            </div>
            <div *ngIf="risks['3.3']">
              {{risks['3.3'].action_plan_comment}}
            </div>
            <div *ngIf="risks['3.4']">
              {{risks['3.4'].action_plan_comment}}
            </div>
          </ng-template>
        </div>
      </div>
    </div>
  </div>
</div>
