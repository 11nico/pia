<div class="pia-cardsBlock pia-doingBlock" [attr.data-id]="pia.id">

    <div class="pia-cardsBlock-header-title" *ngIf="pia.id != null">
      <span *ngIf="isOngoingPIA(); else piaArchived">En cours</span>
      <ng-template #piaArchived>
        Archivée
      </ng-template>
    </div>

    <div class="pia-cardsBlock-item pia-doingBlock-item">
      <div class="pia-cardsBlock-toolbar">
          <div class="pia-cardsBlock-toolbar-edit">
            <a href="javascript:;" (click)="activateEdition()" class="btn pia-tooltip">
              <i class="fa fa-pencil" aria-hidden="true"></i>
              <span class="pia-tooltip-text">Éditer</span>
            </a>
          </div>
          <div class="pia-cardsBlock-toolbar-export">
            <a href="javascript:;" onclick="alert('Bientôt disponible.');" class="btn pia-tooltip">
              <i class="fa fa-download" aria-hidden="true"></i>
              <span class="pia-tooltip-text">Exporter</span>
            </a>
          </div>
          <div class="pia-cardsBlock-toolbar-more">
            <a href="javascript:;" class="btn pia-tooltip" title="Plus d'options">
              <i class="fa fa-ellipsis-h" aria-hidden="true"></i>
              <ul class="pia-cardsBlock-toolbar-moreList">
                <li>
                  <i class="fa fa-files-o" aria-hidden="true"></i>
                  <a href="javascript:;" title="Dupliquer le PIA" onclick="alert('Bientôt disponible.');">Dupliquer</a>
                </li>
                <li>
                  <i class="fa fa-file-excel-o" aria-hidden="true"></i>
                  <a href="javascript:;" title="Exporter le plan d'action">Export du<br>plan d'action</a>
                </li>
                <li>
                  <i class="fa fa-trash-o" aria-hidden="true"></i>
                  <a href="javascript:;" title="Supprimer le PIA" (click)="removePia(pia.id)">Supprimer</a>
                </li>
              </ul>
            </a>
          </div>
      </div>

      <form class="pia-cardsBlock-item-form"
            (ngSubmit)="onSubmit(f)"
            [formGroup]="piaForm">
          <input type="hidden" formControlName="id">
          <div>
              <div style="display:none;" class="pia-doingBlock-item-form-attachment">
                  <span class="pia-icons pia-icon-attachment"></span>
                  <button type="button" class="btn">Analyse EBIOS</button>
              </div>
              <label for="pia-edit-name">Nom du PIA</label>
              <input type="text" formControlName="name" required
                     placeholder="Intitulé" id="pia-edit-name">
          </div>
          <div>
              <label for="pia-edit-author-name">Saisie</label>
              <input type="text" formControlName="author_name" required
                     placeholder="Prénom, nom" id="pia-edit-author-name">
          </div>
          <div>
              <label for="pia-edit-evaluator-name">Évaluation</label>
              <input type="text" formControlName="evaluator_name" required
                     placeholder="Prénom, nom" id="pia-edit-evaluator-name">
          </div>
          <div>
              <label for="pia-edit-validator-name">Validation</label>
              <input type="text" formControlName="validator_name" required
                     placeholder="Prénom, nom" id="pia-edit-validator-name">
          </div>
        <div class="pia-cardsBlock-item-date">
            <div>Date</div>
            <time>{{ pia.created_at | date: 'dd/MM/yyyy' }}</time>
        </div>
        <div class="pia-cardsBlock-item-status">
            <div class="pia-cardsBlock-item-status-infos">
                <div>Status</div>
                <div>En cours d'édition</div>
            </div>
            <div class="pia-cardsBlock-item-status-progressBar">
                <div>0%</div>
                <progress max="100" value="0"></progress>
            </div>
        </div>
        <div class="pia-cardsBlock-item-btn" [ngClass]="{'hide': editMode !== true}">
          <button type="submit" [disabled]="piaForm.invalid" class="btn btn-green">Sauvegarder</button>
        </div>
        <div class="pia-cardsBlock-item-btn" [ngClass]="{'hide': editMode !== false}">
          <a routerLink="/entry/{{pia.id}}/section/1/item/1" class="btn btn-green">Éditer le PIA</a>
        </div>
      </form>
  </div>
</div>
